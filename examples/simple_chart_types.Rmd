---
title: "Simple Chart Type Examples"
author: "Anamaria Crisan"
date: '2019-01-08'
output: html_document
---

This document demonstrates how to implement and plot different chart types using gevitR. This document assumes that you have already run the "Getting started with gevitR" and that the necessary data as already been loaded into your R workspace.

```{r,message=FALSE,warning=FALSE}
devtools::load_all() #temporary once things are done
library(dplyr)

#Table data
tab_dat<-input_data(file = system.file("extdata", "ebov_metadata.csv", package = "gevitR"),dataType = "table")

#Tree data
tree_dat<-input_data(file = system.file("extdata", "ebov_tree.nwk", package = "gevitR"),dataType = "tree")

#Genomic data
genomic_dat<-input_data(file = system.file("extdata", "ebov_GIN_genomic.fasta", package = "gevitR"),dataType = "dna")

#Shape files
#Shape files require that .shp,.shx,and .prj files at a minimun to be in the same directory
#to add metadata to the shape file, you can also add .dbf files
gin_shape_dat<-input_data(file = system.file("extdata", "gin_admbnda_adm1_ocha_itos.shp", package = "gevitR"),dataType = "spatial")
lbr_shape_dat<-input_data(file = system.file("extdata", "lbr_admbnda_adm1_ocha.shp", package = "gevitR"),dataType = "spatial")
sle_shape_dat<-input_data(file = system.file("extdata", "sle_admbnda_adm1_1m_gov_ocha_20161017.shp", package = "gevitR"),dataType = "spatial")
```
## Common statistical charts

```{r common_stats_one,message=FALSE,warning=FALSE,fig.height= 2,fig.width=2,units="in"}
#
# "swarmplot" => implemented specs for this

#a bar chart of all the countries invovled in the ebola outbreak
bar_chart<-specify_base(chart_type = "bar",data="tab_dat",x = "country")
plot(bar_chart)

scatter_chart<-specify_base(chart_type = "scatter",data="tab_dat",x = "latitude",y="longitude",title = "Ebola Scatter Plot")
plot(scatter_chart)

histogram_chart<-specify_base(chart_type = "histogram",data="tab_dat",x = "latitude")
plot(histogram_chart)

pdf_chart<-specify_base(chart_type = "pdf",data="tab_dat",x = "latitude")
plot(pdf_chart)

#works but weird a bit
boxplot_chart<-specify_base(chart_type = "boxplot",data="tab_dat",x = "latitude",y="country")
plot(boxplot_chart)

#we'll even let you make a pie chart
pie_chart<-specify_base(chart_type = "pie",data="tab_dat",x = "country")
plot(pie_chart)

```

gevitR can also work with data frames too, so you can perform some analyses and go ahead and plot the data. Here's an example using a line chart :

```{r common_stats_two, message=FALSE,warning=FALSE,fig.height=2,fig.width=2,units="in"}

#lets use our tabular data
ebov<-tab_dat@data[[1]] #make this nicer
ebov_case_counts<-ebov %>% 
  group_by(country,month) %>%
  count()

line_chart<-specify_base(chart_type = "line",data="ebov_case_counts",x = "month",y="n",group = "country")
plot(line_chart)

```

## Colour charts

Colour charts are common statistical charts those that fundamentally require colour to communicate communicate their results. By comparsion, adding colour to a common statistical chart can be seen as an enhancements (a nice to have, not a need to have).

```{r color_charts,message=FALSE,warning=FALSE,fig.height=2,fig.width=2,units="in"}
# "category stripe" = do.call(render_category_stripe,args = spec_list),

ebov<-tab_dat@data[[1]] #make this nicer
ebov_heat_data<-ebov %>% 
  group_by(country,month) %>%
  count()

heatmap_chart<-specify_base(chart_type = "heatmap",data="ebov_heat_data",x = "country",y="month",z = "n")
plot(heatmap_chart)

density_chart<-specify_base(chart_type = "density",data="tab_dat",x = "latitude",y="longitude")
plot(density_chart)

```

Category stripes are not really meant to be stand alone chart types, they are generally meant to be enhancements, typically for phylogenetic trees, where adding a category stripe is a common paradigm.
But it's possible to generate a category stripe on its own.

```{r color_charts_two,message=FALSE,warning=FALSE,fig.height=2,fig.width=2,units="in",eval=FALSE}
#this doesn't quite work when there are a lot of labels
#maybe the answer here is just a 1D tile plot..
cat_stripe_chart<-specify_base(chart_type = "category stripe",data="tab_dat",x = "site.id",y="bob",category="country")
plot(cat_stripe_chart)

```

## Relational charts

## Spatial charts

## Tree charts
```{r tree_charts,message=FALSE,warning=FALSE,fig.height=2,fig.width=2,units="in"}
phyloTree_chart<-specify_base(chart_type = "phylogenetic tree",data="tree_dat")
plot(phyloTree_chart)
```

## Genomic charts

## Temporal charts
